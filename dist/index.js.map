{"version":3,"sources":["webpack://cookieCheck/webpack/universalModuleDefinition","webpack://cookieCheck/./src/index.ts","webpack://cookieCheck/./src|sync","webpack://cookieCheck/webpack/bootstrap","webpack://cookieCheck/webpack/runtime/hasOwnProperty shorthand","webpack://cookieCheck/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","thirdCookieSupport","param","Promise","resolve","supported","timeout","eventCode","iframeSrc","frame","document","createElement","id","src","style","display","position","window","addEventListener","listen","event","eventData","unsupported","body","removeChild","removeEventListener","setTimeout","appendChild","webpackEmptyContext","req","e","Error","code","keys","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","o","obj","prop","Object","prototype","hasOwnProperty","call"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAqB,YAAID,IAEzBD,EAAkB,YAAIC,IARxB,CASGK,MAAM,WACT,M,2RCMA,IAAIC,EAAqC,KAEzC,mBAAoCC,GAChC,GAA2B,OAAvBD,EACA,OAAOE,QAAQC,QAAQ,CAAEC,UAAWJ,IAGhC,IAAAK,EAAkCJ,EAAK,QAA9BK,EAAyBL,EAAK,UAAnBM,EAAcN,EAAK,UAE/C,OAAO,IAAIC,SAAgB,SAACC,GACxB,IAAMK,EAAQC,SAASC,cAAc,UACrCF,EAAMG,GAAK,MACXH,EAAMI,IACFL,GACA,gEACJC,EAAMK,MAAMC,QAAU,OACtBN,EAAMK,MAAME,SAAW,QAEvBC,OAAOC,iBACH,WACA,SAASC,EAAOC,GACJ,IAAMC,EAAcD,EAAK,OAG5Bb,GACIc,IAAcd,EAAUF,WACrBgB,IAAcd,EAAUe,eAE9Bf,GACiB,kBAAdc,GACiB,oBAAdA,KAERpB,EAAqBM,EACfc,IAAcd,EAAUF,UACV,kBAAdgB,EACNjB,EAAQ,CAAEC,UAAWJ,EAAoBK,SAAS,IAClDI,SAASa,KAAKC,YAAYf,GAC1BQ,OAAOQ,oBAAoB,UAAWN,OAG9C,GAIJO,YAAW,WACoB,OAAvBzB,IAEAG,EAAQ,CAAEC,UADVJ,GAAqB,EACoBK,SAAS,IAClDI,SAASa,KAAKC,YAAYf,MAE/BH,GAAW,KAEdI,SAASa,KAAKI,YAAYlB,W,QCpElC,SAASmB,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,IAAM,GACjCL,EAAoBxB,QAAUwB,EAC9BA,EAAoBhB,GAAK,IACzBf,EAAOD,QAAUgC,ICPbM,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAazC,QAGrB,IAAIC,EAASqC,EAAyBE,GAAY,CAGjDxC,QAAS,IAOV,OAHA2C,EAAoBH,GAAUvC,EAAQA,EAAOD,QAASuC,GAG/CtC,EAAOD,Q,OCrBfuC,EAAoBK,EAAI,CAACC,EAAKC,IAAUC,OAAOC,UAAUC,eAAeC,KAAKL,EAAKC,GCGxDP,EAAoB,M","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cookieCheck\"] = factory();\n\telse\n\t\troot[\"cookieCheck\"] = factory();\n})(self, function() {\nreturn ","interface Result {\n    supported: boolean | null\n    timeout?: boolean\n}\n\ninterface EventCode {\n    supported: string\n    unsupported?: string\n}\n\ninterface Params {\n    timeout?: number\n    eventCode?: EventCode\n    iframeSrc?: string\n}\n\nlet thirdCookieSupport: boolean | null = null\n\nexport default function cookieCheck(param: Params): Promise<Result> {\n    if (thirdCookieSupport !== null) {\n        return Promise.resolve({ supported: thirdCookieSupport })\n    }\n\n    const { timeout, eventCode, iframeSrc } = param;\n\n    return new Promise<Result>((resolve) => {\n        const frame = document.createElement('iframe')\n        frame.id = '3pc'\n        frame.src =\n            iframeSrc ||\n            'https://dungmidside.github.io/3rd-cookie-check/checkpage.html'\n        frame.style.display = 'none'\n        frame.style.position = 'fixed'\n\n        window.addEventListener(\n            'message',\n            function listen(event) {\n                const { data: eventData } = event\n                if (\n                    // handle for custom event code\n                    (eventCode &&\n                        (eventData === eventCode.supported ||\n                            eventData === eventCode.unsupported)) ||\n                    // fallback case\n                    (!eventCode &&\n                        (eventData === '3pc.supported' ||\n                            eventData === '3pc.unsupported'))\n                ) {\n                    thirdCookieSupport = eventCode\n                        ? eventData === eventCode.supported\n                        : eventData === '3pc.supported'\n                    resolve({ supported: thirdCookieSupport, timeout: false })\n                    document.body.removeChild(frame)\n                    window.removeEventListener('message', listen)\n                }\n            },\n            false\n        )\n\n        // Use timeout in case browser not trigger event message for our code\n        setTimeout(function () {\n            if (thirdCookieSupport === null) {\n                thirdCookieSupport = false\n                resolve({ supported: thirdCookieSupport, timeout: true })\n                document.body.removeChild(frame)\n            }\n        }, timeout || 1000)\n\n        document.body.appendChild(frame)\n    })\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 875;\nmodule.exports = webpackEmptyContext;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"sourceRoot":""}